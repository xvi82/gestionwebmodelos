function clasesAnchoPag() {
    anchoTablet > anchoPag && $("#pagina").attr("class", "ts"), anchoPag >= anchoTablet && anchoEscritorio > anchoPag && $("#pagina").attr("class", "tm"), anchoPag > anchoEscritorio && $("#pagina").attr("class", "tl")
}

function limpiaHTML(obj) {
    obj.queue(function() {
        obj.removeAttr("style"), obj.dequeue()
    })
}

function srcVariable() {
    if ($(".srcVariable").length > 0) {
        if ($(".galeriaXXL").length > 0 && $("li.diapo.srcVariable").each(function() {
                var protaFoto = $(this),
                    imgFndS = $(protaFoto).attr("data-bgs"),
                    imgFndM = $(protaFoto).attr("data-bgm"),
                    imgFndL = $(protaFoto).attr("data-bgl");
                $("#pagina").hasClass("ts") && $(protaFoto).css("background-image", "url(" + imgFndS + ")"), $("#pagina").hasClass("tm") && $(protaFoto).css("background-image", "url(" + imgFndM + ")"), $("#pagina").hasClass("tl") && $(protaFoto).css("background-image", "url(" + imgFndL + ")")
            }), $("#navTerciaria h1.srcVariable").length > 0 && $("#navTerciaria h1.srcVariable").each(function() {
                var protaFoto = $(this),
                    imgFndL = $(protaFoto).attr("data-bgl");
                $("#pagina").is(".tl") && $(protaFoto).css("background-image", "url(" + imgFndL + ")")
            }), $(".fotoXXL").length > 0) {
            var protaFoto = $(".fotoXXL"),
                imgFndM = $(protaFoto).attr("data-bgm"),
                imgFndS = $(protaFoto).attr("data-bgs");
            $("#pagina").is(".ts") && $(protaFoto).css("background-image", "url(" + imgFndS + ")"), $("#pagina").is(".tm, .tl") && $(protaFoto).css("background-image", "url(" + imgFndM + ")")
        }
        if ($(".fotoSubhome2").length > 0) {
            var protaFoto = $(".fotoSubhome2 "),
                imgFndS = $(protaFoto).attr("data-bgs"),
                imgFndM = $(protaFoto).attr("data-bgm");
            $("#pagina").is(".ts") && $(protaFoto).css("background-image", "url(" + imgFndS + ")"), $("#pagina").is(".tm,.tl") && $(protaFoto).css("background-image", "url(" + imgFndM + ")")
        }
        $(".mod13").length > 0 && $(".mod13").each(function() {
            var protaFoto = $(this).find(".img"),
                imgFndL = $(protaFoto).attr("data-bgl"),
                imgFndM = $(protaFoto).attr("data-bgm");
            $("#pagina").is(".tl") && $(protaFoto).css("background-image", "url(" + imgFndL + ")"), $("#pagina").is(".tm") && $(protaFoto).css("background-image", "url(" + imgFndM + ")"), $("#pagina").is(".ts") && $(protaFoto).css("background-image", "none")
        })
    }
}

function menuPpal() {
   $(".envN2 .anchoCont").append('<span class="cerrarEnvN2"><a href="#">Cerrar</a></span>'), $(".liNivel1.despliega .nivel1Ppal > a").click(function(event) {
        event.preventDefault();
        var prota1 = $(this),
            liPadre1 = $(prota1).closest("li"),
            suSubmenu1 = $(liPadre1).find(".envN2"),
            liTioActivo1 = $("#navPpal").find(".nivel1Activo"),
            otroSubmenuActivo1 = $(liTioActivo1).find(".envN2");
        $(liPadre1).is(".nivel1Activo") ? ($(liPadre1).removeClass("nivel1Activo"), $(suSubmenu1).slideUp("fast", function() {
            $(suSubmenu1).removeAttr("style").addClass("noMuestra").removeClass("siMuestra")
        })) : ($(liPadre1).addClass("nivel1Activo"), $(suSubmenu1).slideDown("medium", function() {
            $(suSubmenu1).removeAttr("style").addClass("siMuestra").removeClass("noMuestra")
        }), $(liTioActivo1).removeClass("nivel1Activo"), $(otroSubmenuActivo1).slideUp("fast"))
    }), $(".ulNivel2 li.conSubmenu > a").click(function(event) {
        if ($(window).width() > 1006) {
            var altoVentana = $(window).height(),
                topDocumento = $(document).scrollTop(),
                topMin = topDocumento,
                topMax = topDocumento + altoVentana,
                $anclaScroll = $(".siMuestra .cerrarEnvN2"),
                posicionAncla = $anclaScroll.offset();
            posicionAncla.top > topMin && posicionAncla.top < topMax || $("html, body").animate({
                scrollTop: $("#navPpal").offset().top
            }, 700)
        }
        event.preventDefault();
        var prota2 = $(this),
            liPadre2 = $(prota2).closest("li"),
            suSubmenu2 = $(liPadre2).find(".envN3");
        if ($.browser.msie && $.browser.version <= 8) var liTioActivo2 = $(liPadre2).closest(".ulNivel2").find(".nivel2Activo");
        else liTioActivo2 = $(liPadre2).siblings(".nivel2Activo");
        var otroSubmenuActivo2 = $(liTioActivo2).find(".envN3"),
            altoSuUlNivel2 = $(prota2).closest(".ulNivel2").height(),
            altoSuUlNivel3 = $(prota2).next(".envN3").first(".ulNivel3").outerHeight(),
            suAnchoCont = $(prota2).closest(".anchoCont");
        liTioActivo2.removeClass("nivel2Activo"), otroSubmenuActivo2.fadeToggle(), liPadre2.toggleClass("nivel2Activo"), suSubmenu2.fadeToggle().toggleClass("nivel3Activo"), $(window).width() > 1006 && (altoSuUlNivel2 >= altoSuUlNivel3 ? ($(suSubmenu2).addClass("noGrande"), $(suAnchoCont).animate({
            height: altoSuUlNivel2
        })) : altoSuUlNivel3 > altoSuUlNivel2 && ($(suSubmenu2).addClass("grande"), $(suAnchoCont).animate({
            height: altoSuUlNivel3
        })))
    }), $(".cerrarEnvN2").click(function() {
        var prota1 = $(this),
            liPadre1 = $(prota1).closest("li.liNivel1"),
            suSubmenu1 = $(liPadre1).find(".envN2"),
            suNivel3Activo = $(suSubmenu1).find(".nivel3Activo");
        suSubmenu1.slideToggle(), liPadre1.removeClass("nivel1Activo"), $(suSubmenu1).find("li.nivel2Activo").removeClass("nivel2Activo"), suNivel3Activo.removeClass("nivel3Activo").hide(), event.preventDefault()
    });
    var tituMenu = $("#tituMenu"),
        navPpal = $(tituMenu).closest("#divMenu").find("#navPpal");
    $("#tituMenu a").click(function(event) {
        event.preventDefault(), $(navPpal).slideToggle()
    })
}

function desplegablesRecursiva() {
    $("#navRecursiva .abre").click(function(event) {
        {
            var este = $(this),
                suPadre = este.closest(".recurDespliega"),
                suDesplegable = suPadre.find(".desplegable"),
                tioActivo = suPadre.siblings(".activo"),
                primoActivo = tioActivo.find(".semuestra");
            suPadre.find(".cierra"), tioActivo.find(".cierra")
        }
        event.preventDefault(), $(suPadre).is(".activo") ? ($(suPadre).removeClass("activo"), $(suDesplegable).css("display", "none").removeClass("semuestra")) : ($(tioActivo).removeClass("activo"), $(primoActivo).hide().removeClass("semuestra"), $(suPadre).addClass("activo"), $(suDesplegable).css("display", "block").addClass("semuestra"))
    }), $("#navRecursiva .cierra").click(function(event) {
        var este = $(this),
            suPadre = este.closest(".recurDespliega"),
            suDesplegable = suPadre.find(".desplegable");
        event.preventDefault(), $(suPadre).removeClass("activo"), $(suDesplegable).slideUp("fast").removeClass("semuestra"), $(este).fadeOut("fast")
    }), $("#recurLogin .abre").click(function() {
        $("#extranet_usuario").focus()
    }), $("#recurBusca .abre").click(function() {
        $("#srch_gnral").focus()
    })
}

function galeriaHome() {
    $("#pagina").is(".tl,.tx") ? $(".ulDiapos").carouFredSel({
        height: 300,
        circular: !0,
        infinite: !0,
        auto: !0,
        responsive: !0,
        swipe: !0,
        direction: "right",
        align: "center",
        items: {
            visible: 1,
            width: 1596,
            height: 300
        },
        scroll: {
            items: 1,
            duration: 1500
        },
        pagination: {
            container: "#navGaleria .olPag",
            anchorBuilder: function(nr) {
                return "<li><a href='#'><span>" + nr + "</span></a></li>"
            },
            keys: !0
        }
    }) : $("#pagina").is(".tm") ? $(".ulDiapos").carouFredSel({
        height: 300,
        circular: !0,
        infinite: !0,
        auto: !0,
        responsive: !0,
        swipe: !0,
        direction: "right",
        align: "center",
        items: {
            visible: 1,
            width: 769,
            height: 300
        },
        scroll: {
            items: 1,
            duration: 1500
        },
        pagination: {
            container: "#navGaleria .olPag",
            anchorBuilder: function(nr) {
                return "<li><a href='#'><span>" + nr + "</span></a></li>"
            },
            keys: !0
        }
    }) : $("#pagina").is(".ts") && $(".ulDiapos").carouFredSel({
        height: 243,
        circular: !0,
        infinite: !0,
        auto: !0,
        responsive: !0,
        swipe: !0,
        direction: "right",
        items: {
            visible: 1,
            width: 320,
            height: 243
        },
        scroll: {
            items: 1,
            duration: 1500
        },
        pagination: {
            container: "#navGaleria .olPag",
            anchorBuilder: function(nr) {
                return "<li><a href='#'><span>" + nr + "</span></a></li>"
            },
            keys: !0
        }
    })
}

function galeriaDestacadosHome() {
    $.browser.msie && $.browser.version <= 8 || ($(window).width() <= 500 ? $("#colDestacados .cont ul").carouFredSel({
        responsive: !0,
        swipe: !0,
        height: "variable",
        circular: !0,
        infinite: !0,
        auto: !1,
        direction: "right",
        items: {
            width: 235,
            height: "variable",
            visible: 1
        },
        scroll: 1,
        next: "#btnAvan a",
        prev: "#btnRetro a"
    }) : $(window).width() > 500 && $(window).width() < 800 ? $("#colDestacados .cont ul").carouFredSel({
        responsive: !0,
        swipe: !0,
        height: "variable",
        circular: !0,
        infinite: !0,
        auto: !1,
        direction: "right",
        items: {
            width: 235,
            height: "variable",
            visible: 2
        },
        scroll: 1,
        next: "#btnAvan a",
        prev: "#btnRetro a"
    }) : $(window).width() > 800 && $(window).width() < 1006 && $("#colDestacados .cont ul").carouFredSel({
        responsive: !0,
        swipe: !0,
        height: "variable",
        circular: !0,
        infinite: !0,
        auto: !1,
        direction: "right",
        items: {
            width: 280,
            height: "variable",
            visible: 3
        },
        scroll: 1,
        next: "#btnAvan a",
        prev: "#btnRetro a"
    }))
}

function scrollSuavizado() {
    $("a.atajo2").click(function(event) {
        event.preventDefault();
        var target = this.hash;
        $target = $(target), $("html, body").stop().animate({
            scrollTop: $target.offset().top
        }, 900, "swing")
    })
}

function altosIguales() {
    $(".mod08").length > 0 && $(".mod08 .cont").igualaAltura(), $(".videosInf").length > 0 && $(".previoVideo").igualaAltura(), $(".mod10").length > 0 && $(".mod10 .env").igualaAltura(), $(".bNconBorde #modNoticias:visible .mod09").length > 0 && $(".mod09 .env").igualaAltura()
}

function mapaOrganos() {
    function resize(maxWidth, maxHeight) {
        var image = $("img[usemap]"),
            imgWidth = image.width(),
            imgHeight = image.height(),
            newWidth = 0,
            newHeight = 0;
        imgWidth / maxWidth > imgHeight / maxHeight ? newWidth = maxWidth : newHeight = maxHeight, image.mapster("resize", newWidth, newHeight, resizeTime)
    }

    function onWindowResize() {
        var curWidth = $(".anchoAncla").width(),
            curHeight = $(window).height(),
            checking = !1;
        checking || (checking = !0, window.setTimeout(function() {
            var newWidth = $(".anchoAncla").width(),
                newHeight = $(window).height();
            newWidth === curWidth && newHeight === curHeight && resize(newWidth, newHeight), checking = !1
        }, resizeDelay))
    }
    if ($("#divLogado").is(".noLogado")) var colorRelleno = "3182bb";
    else if ($("#divLogado").is(".siLogado")) var colorRelleno = "ac1734";
    $("img[usemap]").mapster({
        singleSelect: !0,
        isSelectable: !1,
        render_highlight: {
            fillColor: colorRelleno
        },
        fill: !0,
        fillOpacity: .2,
        strokeWidth: 2,
        stroke: !0,
        strokeColor: "333333"
    }), $(".divMapa area").click(function() {
        return location.href = this.href, !1
    }), $(".divListado li").each(function(i) {
        i++;
        var numero = $(this).attr("class");
        $(this).find("a").mouseover(function() {
            $(".mapaListado area." + numero).mouseover(), $(this).addClass("on")
        }).mouseout(function() {
            $(".mapaListado area." + numero).mouseout(), $(this).removeClass("on")
        })
    }), $(".mapaListado area").each(function(i) {
        i++;
        var numeroArea = $(this).attr("class");
        $(this).mouseover(function() {
            $(".divListado li." + numeroArea).find("a").addClass("on")
        }).mouseout(function() {
            $(".divListado li." + numeroArea).find("a").removeClass("on")
        })
    });
    var resizeTime = 100,
        resizeDelay = 100;
    $(window).bind("resize", onWindowResize)
}

function recalculo() {
        anchoPag = $(window).width(), clasesAnchoPag(), galeriaHome(), galeriaDestacadosHome(), srcVariable()
    }! function($, sr) {
        var debounce = function(func, threshold, execAsap) {
            var timeout;
            return function() {
                function delayed() {
                    execAsap || func.apply(obj, args), timeout = null
                }
                var obj = this,
                    args = arguments;
                timeout ? clearTimeout(timeout) : execAsap && func.apply(obj, args), timeout = setTimeout(delayed, threshold || 400)
            }
        };
        jQuery.fn[sr] = function(fn) {
            return fn ? this.bind("resize", debounce(fn)) : this.trigger(sr)
        }
    }(jQuery, "smartresize"), jQuery.browser = {},
    function() {
        jQuery.browser.msie = !1, jQuery.browser.version = 0, navigator.userAgent.match(/MSIE ([0-9]+)\./) && (jQuery.browser.msie = !0, jQuery.browser.version = RegExp.$1)
    }(),
    function($) {
        $.fn.igualaAltura = function() {
            var masalto = 0,
                esteAlto = 0;
            this.each(function() {
                $(this).height("auto"), esteAlto = $(this).height(), esteAlto > masalto && (masalto = esteAlto)
            }), this.each(function() {
                var altoEm = masalto / 14;
                $(this).height(altoEm + "em")
            })
        }
    }(jQuery), $(window).smartresize(function() {
        altosIguales()
    }), $(document).ready(function() {
        if (anchoPag = $(window).width(), anchoMovil = 320, anchoTablet = 768, anchoEscritorio = 1024, recalculo(), menuPpal(), desplegablesRecursiva(), scrollSuavizado(), altosIguales(), 1 === $("#divPestanias, #divAcordeon, #divPestaniasHorizontal").length) {
            new tabpanel("divPestanias", !1), new tabpanel("divAcordeon", !0), new tabpanel("divPestaniasHorizontal", !1)
        }
        if (0 === $("body.lt-ie9").length && $(window).smartresize(function() {
                recalculo(), anchoPantallaNuevo = $(window).width(), 1011 > anchoPantallaNuevo ? $("#navTerciaria h1.src-variable").css("background-image", "none") : anchoPantallaNuevo >= anchoEscritorio && ($("#navPpal").css("display", "block"), $("#colDestacados .cont ul").trigger("destroy", !0))
            }), $("body").is(".lt-ie9") && ($(".ulNivel2 > li:nth-child(2n+1)").addClass("impar"), $(".divResultados2 li.li:nth-child(2n+1)").addClass("impar"), $(".grupo.grupoDistribuidores .mod:nth-child(3n+3)").addClass("tercero")), $("#mapaListado").length > 0 && mapaOrganos(), $(".vistasPrevias").length > 0 && $(".vistasPrevias .envThumb a").fancybox(), $(".contAcordeon2").length > 0 && $(".titu.desplegable a").click(function(event) {
                event.preventDefault(!0);
                var esteEnlace = $(this),
                    pPadre = $(esteEnlace).closest("p.titu"),
                    suCont = ($(pPadre).closest(".liAcord2"), $(pPadre).siblings(".contDesplegable"));
                $(pPadre).toggleClass("activo"), $(suCont).toggleClass("desplegado").slideToggle()
            }), $(".divAyuda").length > 0 && $(".icoAyuda").click(function(event) {
                event.preventDefault(!0);
                var esteEnlace = $(this),
                    divPadre = $(esteEnlace).closest(".divAyuda"),
                    suGlobo = $(divPadre).find(".globoAyuda");
                $(suGlobo).toggleClass("desplegado").attr("aria-hidden", "false").slideToggle()
            }), $(".textoArticulo.textoCorrido").length > 0) {
            var pes = $(".textoArticulo.textoCorrido").children("p");
            $(pes).each(function() {
                $(this).text().trim().length || $(this).addClass("pSinTexto")
            })
        }
        $(".cajaPaginacion").length > 0 && $("#pag01").bind("focus", function() {
            $(this).closest(".cajaPaginacion").addClass("conFocus")
        }).bind("blur", function() {
            $(this).closest(".cajaPaginacion").removeClass("conFocus")
        }), $("#mensajeCookies").length > 0 && $("#mensajeCookies .botonCerrar").click(function(event) {
            event.preventDefault(!0), $("#mensajeCookies,  #posicionCookies").remove()
        })
    });



/* 150624 MOD: Inclusion slider */
var cendoj_slider=function(){
    var quitaClase=function(elemento){
        $("#cendoj_slider").find(elemento).removeClass("en_vista");
    };
    var ponClase=function(elemento){
        $("#cendoj_slider").find(elemento).addClass("en_vista");
    };
    var _controlaDimensiones=function(){
        var $contenedor=$("#slider_y_enlaces").removeAttr("style");
        var $slider=$("#cendoj_slider").removeAttr("style");
        var $enlaces=$("#cendoj_enlaces").removeAttr("style");
        $slider.find(".en_vista img").removeAttr("style");
        var w_slider=$slider.width();
        var h_slider;
        var w_enlaces=$enlaces.outerWidth(true);
        var w_cont_principal=$("#colPpal .plantillaInterior1").width();
        if ((w_slider + w_enlaces) >= w_cont_principal){
            $contenedor.css({"width":"auto","height":"100%"});
            $slider.css({"width":"100%"});
            w_slider=$slider.width();
            h_slider=$slider.height();
            var h_image = $slider.find(".en_vista img").height();
            var h_texto = $slider.find(".en_vista .slider_texto").outerHeight(true)+40;
            var h_total = h_image + h_texto;
            /* Fallo de control de tamaños en resposive */
            if (h_total==387){
                h_total=387+h_texto;
            }
            /* /Fallo de control de tamaños en resposive */
            if (h_slider != h_total){
                h_slider = h_total;
                $slider.css({"height":h_slider});
            }
            //enlaces
            $enlaces.css({"margin-left":0,"width":$slider.width()-50,"height":"auto","padding-bottom":"25px"});
        }
        else{
            h_slider=$contenedor.height();
        }

        $slider.find(".fotogramas").carouFredSel({
            circular: true,
            infinite: true,
            auto: false,    
            responsive: true,
            swipe: true,
            direction: "right",
            align: "center",
            items: {
                visible: 1,
                width: w_slider,
                height: h_slider
            },
            scroll: {
                items: 1,
                duration: 1500
            },
            pagination: {
                container: "#cendoj_slider .olPag",
                anchorBuilder: function(nr) {
                    return "<li><a href='#'><span>" + nr + "</span></a></li>"
                },
                keys: true
            },
            prev: {
                onBefore: function( data ) {
                    quitaClase(data.items.old);
                },
                onAfter : function( data ) {
                    ponClase(data.items.visible);
                }
            },
            next: {
                onBefore: function( data ) {
                    quitaClase(data.items.old);
                },
                onAfter : function( data ) {
                    ponClase(data.items.visible);
                }
            }
        });
    };
    return {controlaDimensiones:_controlaDimensiones}
}();
/* 150625 MOD: MAPA */
var GoogleMaps=function() {
    var init=function(){
        var $boton=$("#contenedorContactos .boton.active");
        var latitud=$boton.data("latitud");
        var longitud=$boton.data("longitud");
        coordenadas={latitud:latitud,longitud:longitud};
        inicia_mapa(coordenadas);
    },
    inicia_mapa=function(coordenadas){
        var mapOptions = {
            zoom: 15,
            disableDefaultUI: true,
            scrollwheel: false,
            center: new google.maps.LatLng(coordenadas.latitud,coordenadas.longitud)
        };
        var_map = new google.maps.Map(document.getElementById('map-canvas_cendoj'),mapOptions);
        var var_location = new google.maps.LatLng(coordenadas.latitud,coordenadas.longitud);
        var var_marker = new google.maps.Marker({
            position: var_location,
            map: var_map,
            title:"Descripción del punto"
        });
        centralo(coordenadas);
    },
    resize=function(){
        if(typeof var_map != 'undefined'){
            google.maps.event.trigger(document.getElementById('map-canvas_cendoj'), 'resize');
            google.maps.visualRefresh = true;
            centralo();
        }
        else{
            init();
        }
    },  
    centralo=function(coordenadas){
        if(typeof coordenadas == 'undefined'){
            var $boton=$("#contenedorContactos .boton.active");
            var latitud=$boton.data("latitud");
            var longitud=$boton.data("longitud");
            coordenadas={latitud:latitud,longitud:longitud};
        }
        if(typeof var_map != 'undefined'){
            var punto=new google.maps.LatLng(coordenadas.latitud, coordenadas.longitud);
            var_map.panTo(punto);
        }
        else{
            init();
        }
    };
    return {
        init:init,
        inicia_mapa:inicia_mapa,
        centralo : centralo,
        resize : resize
    };
}();
/* /150625 MOD: MAPA */
$(function(){

    // SLIDER
    if($("#cendoj_slider").length>0){
        cendoj_slider.controlaDimensiones();
    }
    // MAPA
    if ($("#map-canvas_cendoj").length>0){
        GoogleMaps.init();
        var $botonera=$("#contenedorContactos").find(".botonera");
        var $info_mapa=$("#contenedor_info_mapa");
        $botonera.find(".boton").on("click",function(){
            var $boton=$(this);
            var isActive=$boton.hasClass("active");
            var coordenadas={};
            if(!isActive){
                $botonera.find(".active").removeClass("active");
                $boton.addClass("active");
                var posicion=$boton.closest("li").index();
                $info_mapa.find(".txtMapa").addClass("oculto");
                $info_mapa.find(".txtMapa").eq(posicion).removeClass("oculto");
                var latitud=$boton.data("latitud");
                var longitud=$boton.data("longitud");
                coordenadas={latitud:latitud,longitud:longitud};
                GoogleMaps.inicia_mapa(coordenadas);
            }
        });
    }
    // EVENTOS AL RESIZE WINDOW
    $(window).resize(function() {
        if(this.resizeTO){
            clearTimeout(this.resizeTO);
        }
        this.resizeTO = setTimeout(function() {
            $(this).trigger('resizeEnd');
        }, 300);
    });
    $(window).bind('resizeEnd', function() {
        // slider
        if($("#cendoj_slider").length>0){
            cendoj_slider.controlaDimensiones();
        }
        // mapa
        if ($("#map-canvas_cendoj").length>0){
            setTimeout(function(){
                GoogleMaps.resize();
            },500);
        }
    });
});
/* /150624 MOD: Inclusion slider */